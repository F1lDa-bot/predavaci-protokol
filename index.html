<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generátor předávacího protokolu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for printing */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none;
            }
            #protocol-form {
                box-shadow: none;
                border: none;
                margin: 0;
                padding: 0;
            }
        }
        /* Styling for the dotted line inputs */
        .form-input {
            border: none;
            border-bottom: 1px dotted #333;
            background-color: transparent;
            padding: 2px 1px;
            outline: none;
            width: 100%;
        }
        .form-input:focus {
            border-bottom: 1px solid #000;
        }
        /* Custom checkbox */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            height: 1.25rem;
            width: 1.25rem;
            border: 1px solid #000;
            cursor: pointer;
            display: inline-block;
            position: relative;
            top: 4px;
        }
        .custom-checkbox:checked {
            background-color: #000;
        }
        .custom-checkbox:checked::after {
            content: '✓';
            font-size: 1rem;
            color: white;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        .custom-checkbox.checked-x:checked::after {
            content: 'X';
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- The form that will be converted to PDF -->
        <div id="protocol-form" class="bg-white p-6 sm:p-10 md:p-16 border border-gray-200 shadow-lg">
            <header class="text-center mb-12">
                <!-- Logo Image -->
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2AAAAEsCAYAAADR7/wLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA30SURBVHhe7d3RbhvJEUbxH333Hn2H3mF3mN2GvIGMvQeQWbZlyZIlS7Yk2/bsyP4xW3/V2mS3/3RmV45XWbKzI8uWLNlZkWVLluzsyLIly/bUrv3n//zn/M+VnZllS5bsrMiyJUt2VqT59fW1V1e3P/z440HztTdu3PjW1tYfXl5e3v7jH/8437/yyivve/fddx8+fPjw1q1b37lz540bN+5///vf4+rLly/v3r377rvvvjdu3Nj9+wMDA+Pj4x8+fHj79u3/W1Nlu6/8d2bZkiU7K7JsSZO3+h+tVvvzn//8xsbGX/3qV9/48eNPnjx58+bN+/fvv3Pnzm+//fbNmzffv3//2trazz//vLh65swZGxsbBw8e/Otf//r69euXf/7P39/9m2++efPmzWvXrl2/fv3mzZtff/31r7/+2rNnz4cPH7558+b6+vrFixc3Njaurq6+e/fu7du3c/XFixcvXrz47rvv3r1798WLFy8uLs7V4+Pj4+PjS5cu3b59+4EDB7Zt27Z9+/bm5ubb29vr6+sXFxdz5z/00EP79u3bvn379u3bt3fv3s3NzRcvXszV4+PjW7du3b17N78/+eSTy8vLFy5cyOVbWlq6desW95k2bdqmTZs2b968c+fOzz777O7du5cuXbq+vr6+vr62tra5ufntt9/O+fT8+fPnz58fHx+fTCbnz27duvXuu+9ubW29evXqxYsX33///dOnT3/xxRd/+ctf+j+jLdnpkGVLluxsS/Lrv//7v48fP37w4MFtbW1//OMf9z+fPXv20KFDN27cuHz58vXr15cvX86V3d3d+fn5Fy9ePH/+fG5u7o0bN86dO/fixYs7d+6cOnXq7t27X3755bvvvvvo0aNXr169ePFi9j+bNm3av3//0aNHuVdOnz69f//+uXPnzpw5c+bMmcOHD9+8eXPnzp0LFy58++23d+7cOXbs2MaNG0+dOnX69Ompqanp6em7d+/m5+evrq6ubW1tbm7++c9//t13342NjU2cOHHs2LHx8fHu7u5jx44dO3YsNzf34sWLO3fufPzxx7dv375+/Xrv3r3vv//+yy+/nJe7u7vX1tbu37/f3d3d2tr68ccf37p164svvkhyc4MHD96wYcORI0fu3LlzzJgxb7311oULF06cOPHevXs3b978xhtvXL16Nbfp1q1bFy5cuHz58uXLl1etWrV+/XrO5wsvvLBr1y7OZ/LkyYsXL166dOnFixdv3rx54sSJ9fX148eP37Zt2+HDhy9evPj5559v3br1yy+/XFxc/OY3vzlw4MDGjRufeeaZCRMm/P///d+0adPWrVv//ve/9/cLy5YsuTJkyZKl8teRI0e+/vrrx48ff//992++++7Vq1c/++yze/furV+/PncuNzc3d3d3zgcqVaqsrKysrKyoqKjQ0NDk5GRXV9dFixb97ne/y/n87bffZs6cedKkSVOmTJk8efLatWuzZ8++8847jz/++N69e/Pnzz9x4sRbb71169atiouLW1tbd+zYceDAgRkzZkRHR3/961//9ttv79+/f/ny5StWrGhoaDhx4kROzMDAQIqVHR0dnZ2d2dnZOXHiRAqN6Ojo6Ojo6OgYMGBAamrq8ePH8/Pz5eXly5cv3rx5c9asWT///PNly5atW7du69atmzZt+tlnn6WlpW/evLnR0dGvv/563Jzly5dv3br15cuXU1NTc3Nzv/zyy+bNm0+cOHHhwoWxsbHbt2/furVr1qyZlpaWkSNHZmdnr1y58uSTT548efLy5ctz5849evSoqqoqb1d5zZzlypYsuTJkyZKl8tfx48evW7fujz/+2NzcfPPNN7/xxhsrKyvv378/NjbW2dnp7e1ds2bNoEGDiouLa2tr165d+9///tfo0aOLFy8ePHhwTk5OZmZmamrq1KlTp0+fnp6enp6eDg0NjY2NfeCBB06dOrVarbVabWRkhFqtFhcX995779XV1Z07d04R8J///OeEhARYXl4eGhpaW1uzsbGxsbGJior27Nnz7rvv3r9/f2Bg4LnnnpOQkMDKyvr4449v3779+++/z8jImDx58tSpU5cuXfrpp5/m5uZWVVV1dXXx8fFlZWWzZs06ceJEampqfHx8bGxsbm5ubm5ubm5uZmbm+vXrR44cOXz48KFDhzIyMtLT02NjY/v27Xvw4EEbW5w1a9bixYvr6urOmjVr3rx5W7Zsee2119RqtaGhobOzs7u7u7W1NTs7Ozk5ubm5ubW1tbKycnp6+vbt2+fOnfvWW28tWbLkzJkz+/fvv2jRosWLFzc0NDg6OnZ0dGxpaZk8efLatWs/++wz9Xq9sLCwnJyctra2zs7Otra2ubm5vr4+Ozu7trbW1dW1sLDg6urKyclJSkqKk5Pz7rvvNjc3Dw0N3bZtW1lZ+Z//+Z/33ntv2LBhXV1dc3PzqVOn7ty509zcfOfOnbW1tdHR0VdffTU4OPjBBx/Mycnp6enZuHHjqVOnpKen9+/fv3fv3uTk5NLS0u7u7iNHjhQUFHz//fcrVqzo7e1dsGDBk08+ubm5ecyYMe+//76rq+vo0aOrq6vPnj0bFxdXW1u7fv36jIwMlZWVNTU1t2/fPnnyZElJSWJi4owZM1588UX1ep2VlVXev/KyOcuVLftyZMlyK/4aGhr6+/uHhoampqb27dvX3Ny8YsWK9fX1b775ZuTIkY8//ri5uXnu3Llf/OIXa9euxcXFpaWlZWVlpaWl58+ff+211y5dutTX13dqampubt6zZ8+rV6/u3r3b3t7+q1/96sKFC59//nm7lVdXWbJ7JcuWLNlZkWXLlewOWbZkyc6KLFuyZGclliy7V7JkyZKdFVm2ZMnOSiyZbdmypT/1l2/Nli1ZsrMiy5YsuXJkyZKlS1e2ZMmSXRdZtmTJzkos2e6VLFmytSLTli3ZWZFliyVbdv/Kli3ZXZJly5ZkyZJdl9k0W7Zkyc5KLNnulyxZsq0i05Yt2VnlL9lyK1m2ZNmVIFu2ZMnOSiyZbZctW7LlVbZkyZKdFVm2ZMmSXVVk2ZIlOyuxZKdDli1Zsq2yZcuSXRVZtmTJzkosue2WLVmy5VayZcuSXRVZtmTJzkos2e6XLFmytSKzli3ZWZFly5Js2f0rW7Zkd0mWLVuSJEu2LjNp2ZKdlViy3S9ZsmlbkdlKlrLlymVZtmTJkpyVZNmSJTsrsWSmXrZkybKqZcuSXRVZtmTJzkos2bbKli3ZcitanbZkyc5KLNnulyxZsq0is7Zkyc5KLNs2yrbK/5Wv+cuWLVkyXZFp2ZKdlViy3S9ZsmRbZdasZWfKli1ZcuWQLVuycyXLlixZkh2VYdmyJTsrsmSzWbZkyZKlK1m2ZMnOiixbsuTOkS1bst0vWbZk2VIZtmzJzoosuWxZtmTJlq5o2ZKdlViy3S9ZsmRbJWbZkrLlymVZtmT/lSyZbdmyJTsrsmTJkgzKli3ZXZFlS5Ys2e6XLFmytSqzbNmuSizZfpYsWbKzIs+WLVnLliyZdEWmTVuycyVLlixZkh1VsiXLdmVk2bL/lW35L2fLli1ZcmXIlixZuhKrZcuS7a5IsuXLkiU7KbJktliyZcuSXVVk2ZKdZciWLNkZyZKdLVu2ZMmuKjJt2ZKdZciWLNkZyZKdrS1b8t2RZcuW/5UtW7JkZ0WWLdky5FmyZUu2VWbZlixbsrMiyzbKlixb9p/K1u6XLFuy/0rWbJYsW7Kv+cuWLVkyXTFnKVu2ZEuWXMn+K1ny3ZHly5YsWbL/StZslrJlS/ZXvjTcsiXLlixZMlu2ZMn+K1ny3ZFsyZIlS3ZWZNmSJTsrsmyZZcuWLFmSXTNnyZYtWbIly5YsybQ1W7Zkyc6KLFmSZUuWLFky2S1bsmRLlixbsv+VrNk5smTJ/ivblixZsmTJbNmyJftPZMmy/VeyZMl2V2TJbNmSJbtfsiRLlixbsrMiy2ZZsuVVsjVbsmTJkiVbkj/5r5gtW/afyLbli5YtWbJkyWzZkiX7T2SyrbJlyZJdFWXbKFu2ZMmuKliyrbJlyZJdFWbZsmRLlixbsmRLtnOyZcuSXVVkypYt2Vll2Sxbso2uLMl/pStZsmRLliyZLWXKli1Zsh0vWbZkyZIlW7LlVrY1W7LlVbJkyZJdFWXbKFu2ZMmuKliyrbJlyZJdFWbZsmRLlixbsmRLtqVky5Yl2e6XLFuyZTv2n8i2Zf+Vbdl/JVu2ZcuSJVsyZ2nbkqzZ3JHly5Ys2X/lK/45smTJkiXblixbsrMiy5Yt2Vl5smTJli3ZXZFlS5YsyX6mLVu2bJYs2Vl5tmTJkizZlixbsnMiS7ZkyZYs2bZkyZIsWbJkyZIlS/afyJIsWbJkyZYsWbZkyZYsWbJkSZZsyZIlW7JkyZIsWbJkyZIlS7ZkSZZsyZIlS/afyJIsWbJkyZYsWbZkyZYsWbJkSZZsyZIlS/afyJIsWbJkyZYsWbZkyZYsWbJkSZZsyZIlW7Jl2yhbsp0sW7JkyZIl2Rkly5YsuTJkyZIl2yhbsp0sW7JkyZIl2X9KyZIlS3ZWZNmSJTsrsizLli3Z91mWJVuy/5aWLVm2PsuSLVny5MiS/V+WLVmyZMmS/K/9B41l4o/r0N6yAAAAAElFTkSuQmCC" class="mx-auto h-24 object-contain" alt="Brands Logo">
            </header>

            <main>
                <h1 class="text-2xl font-bold text-center mb-8">Předání zařízení:</h1>

                <!-- Customer Info -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6 mb-6">
                    <div class="flex items-center">
                        <label for="customer" class="font-bold whitespace-nowrap mr-2">Zákazník:</label>
                        <input type="text" id="customer" class="form-input">
                    </div>
                    <div class="flex items-center">
                        <label for="phone" class="font-bold whitespace-nowrap mr-2">Telefon:</label>
                        <input type="text" id="phone" class="form-input">
                    </div>
                    <div class="flex items-center">
                        <label for="ico" class="font-bold whitespace-nowrap mr-2">IČO:</label>
                        <input type="text" id="ico" class="form-input">
                    </div>
                </div>

                <!-- Device Info -->
                <div class="mb-6">
                    <div class="flex flex-wrap items-center gap-x-6 gap-y-2 mb-4">
                        <p class="font-bold">Zařízení:</p>
                        <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox checked-x"> iPhone</label>
                        <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> iPad/Watch</label>
                        <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> Mac/PC</label>
                        <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> Konzole</label>
                        <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> ACC/jiné</label>
                    </div>
                     <div class="flex items-center mb-4">
                        <label for="sn" class="font-bold whitespace-nowrap mr-2">SN:</label>
                        <input type="text" id="sn" class="form-input">
                    </div>
                     <div class="flex items-center">
                        <label for="condition" class="font-bold whitespace-nowrap mr-2">Stav zařízení:</label>
                        <input type="text" id="condition" class="form-input">
                    </div>
                </div>
                
                <!-- Requested Service -->
                <div class="mb-10">
                     <div class="flex flex-wrap items-center gap-x-8 gap-y-4">
                        <p class="font-bold w-full md:w-auto">Požadovaná služba:</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-4 flex-1">
                            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox checked-x"> Diagnostika/čištění</label>
                            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> Reinstalace/záloha/přehrání dat</label>
                            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox checked-x"> Ekologická likvidace</label>
                            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="custom-checkbox"> Cenový návrh pro pojišťovnu</label>
                        </div>
                    </div>
                </div>

                <!-- Location, Date, Price -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-x-12 gap-y-6 mb-16">
                    <div class="flex items-center">
                        <label for="location" class="font-bold whitespace-nowrap mr-2">V:</label>
                        <input type="text" id="location" class="form-input">
                    </div>
                    <div class="flex items-center">
                        <label for="date" class="font-bold whitespace-nowrap mr-2">Dne:</label>
                        <input type="text" id="date" class="form-input">
                    </div>
                    <div class="flex items-center">
                        <label for="price" class="font-bold whitespace-nowrap mr-2">Cena:</label>
                        <input type="text" id="price" class="form-input">
                    </div>
                </div>

                <!-- Signature Lines -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-8 mt-16 pt-8">
                     <div class="text-center">
                         <div class="border-b-2 border-black w-full"></div>
                         <p class="text-sm mt-2">Zákazník (hůlkovým písmem + podpis)</p>
                     </div>
                     <div class="text-center">
                         <div class="border-b-2 border-black w-full"></div>
                         <p class="text-sm mt-2">za Smarty Brands. (razítko + podpis)</p>
                     </div>
                </div>

            </main>

            <!-- Footer Icons -->
            <footer class="mt-20 pt-8 flex justify-center items-center">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABjAAAAEsCAYAAAA1+bU/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAsCSURBVHhe7d1RjyRJEsfxH+sd2B3YDnYH+0C4ZEmWJUuWLMmyLMuyrI/t/P2n+1z1LUn+I8myJEuWLMlyZEkWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElWLElW-21.jpg" class="h-16 mx-auto" alt="Gaming Consoles">
            </footer>

        </div>

        <!-- Action Button -->
        <div class="text-center mt-8 no-print">
            <button id="generate-pdf" class="bg-fuchsia-500 hover:bg-fuchsia-600 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105">
                Vygenerovat PDF
            </button>
        </div>
    </div>

    <script>
        // Set current date
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.getElementById('date');
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
            const year = today.getFullYear();
            dateInput.value = `${day}.${month}.${year}`;
        });

        // PDF Generation logic
        document.getElementById('generate-pdf').addEventListener('click', () => {
            const protocolForm = document.getElementById('protocol-form');
            const button = document.getElementById('generate-pdf');
            
            // Hide button to not include it in the PDF
            button.style.display = 'none';

            // Use html2canvas to capture the form element
            html2canvas(protocolForm, {
                scale: 2, // Higher scale for better quality
                useCORS: true,
                logging: false,
                windowWidth: protocolForm.scrollWidth,
                windowHeight: protocolForm.scrollHeight
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;

                // A4 dimensions in mm
                const pdfWidth = 210;
                const pdfHeight = 297;

                const canvasWidth = canvas.width;
                const canvasHeight = canvas.height;
                const canvasAspectRatio = canvasWidth / canvasHeight;

                let imgWidth = pdfWidth - 20; // with margin
                let imgHeight = imgWidth / canvasAspectRatio;
                
                let pdf;
                // Check if content is taller than A4, then create a longer PDF
                if (imgHeight > (pdfHeight - 20)) {
                    pdf = new jsPDF({
                        orientation: 'p',
                        unit: 'mm',
                        format: [pdfWidth, imgHeight + 20] // custom height
                    });
                } else {
                     pdf = new jsPDF({
                        orientation: 'p',
                        unit: 'mm',
                        format: 'a4'
                    });
                }
                
                const x = (pdf.internal.pageSize.getWidth() - imgWidth) / 2;
                const y = 10; // top margin

                pdf.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);
                pdf.save('predavaci-protokol.pdf');

                // Show button again
                button.style.display = 'block';
            }).catch(err => {
                console.error("Error generating PDF:", err);
                // Show button again in case of error
                button.style.display = 'block';
            });
        });
    </script>

</body>
</html>
